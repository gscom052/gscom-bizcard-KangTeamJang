<script>
const siteURL = "gscom052.github.io/gscom-bizcard-KimInJae";
const text = "재밌는커뮤니케이션 대표 김인재 명함";	
</script>

<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <title>재밌는커뮤니케이션 디지털 명함</title>
  <link rel="manifest" crossorigin="use-credentials" href="./manifest.json">
  <link rel="stylesheet" href="css/style.css">
  
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" href="images/hello-icon-152.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="white"/>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="재밌는커뮤니케이션 디지털 명함">
  <meta name="msapplication-TileImage" content="images/hello-icon-144.png">
  <meta name="msapplication-TileColor" content="#FFFFFF">
  
  <meta property="og:url" content="http://www.adgscom.co.kr/business_card/">
  <!-- 카카오 캐시 보관 방식 때문에 이름 직책을 주면 url이 바뀌어도 유지가되서 현재 상태 content 유지 -->
  <meta property="og:title" content="재밌는커뮤니케이션 디지털 명함"> 
  <meta property="og:type" content="website">
  <meta property="og:image" content="images/preview.png">
  
  
</head>
<body>
    <div class="business-card">
        <div class="tri"></div>
        <div class="business-card-top">
            <div class="logo">
                <a href="http://www.adgscom.co.kr/" target="_blank">
                    <figure>
                        <img src="images/logo.svg" alt="재밌는커뮤니케이션">
                        <figcaption>www.adgscom.co.kr</figcaption>
                    </figure>
                </a>
            </div>
		
            <!-- 요기 -->
            <div id="sharePOS"></div>
            
		
		
            <div class="title">
                <div class="name">
                    <p>대표<strong>김 인 재</strong></p>
                </div>
            </div>
        </div>
        <div class="business-card-bottom">
            <ul>
                <li>
                    <a href="tel:031-901-4350">
                        <div class="card-con">
                            <img src="images/tel.svg" alt="전화">
                            <p><b>tel</b>031.901.4350</p>
                        </div>
                        <div class="card-info">
                            <img src="images/call.svg" alt="전화걸기">
                            <p>전화걸기</p>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="tel:010-3729-1974">
                        <div class="card-con">
                            <img src="images/moblie.svg" alt="핸드폰">
                            <p><b>moblie</b>010.3729.1974</p>
                        </div>
                        <div class="card-info">
                            <img src="images/call.svg" alt="전화걸기">
                            <p>전화걸기</p>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <div class="card-con">
                            <img src="images/fax.svg" alt="팩스">
                            <p><b>fax</b>031.901.4370</p>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="mailto:gs0052@hanmail.net">
                        <div class="card-con">
                            <img src="images/e-mail.svg" alt="이메일">
                            <p><b>e-mail</b><span id="textDiv">gs0052@hanmail.net</span></p>
                        </div>
                        <div class="card-info" id="copyBtn">
                            <img src="images/copy.svg" alt="복사">
                            <p>복사</p>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <div class="card-con">
                            <img src="images/webhard.svg" alt="웹하드">
                            <p><b>webhard</b>ID - gscom PW - 0052</p>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <div class="card-con">
                            <img src="images/add.svg" alt="주소">
                            <p><b>add</b><span id="textDiv2">경기 고양시 일산동구 백마로 195 <br /> 엠시티오피스타워 일반동 6001-1</span></p>
                        </div>
                        <div class="card-info" id="copyBtn2">
                            <img src="images/copy.svg" alt="복사">
                            <p>복사</p>
                        </div>
                    </a>
                </li>
            </ul>
        </div>
        <!-- Install button, hidden by default -->
        <div id="installContainer" class="hidden" >
        <button id="butInstall" type="button">
            <img src="images/download.svg" alt="명함 다운로드">
            Download
        </button>
        </div>
    </div>


 </body>
  <script src="js/lib.js"></script>
  <script type="text/javascript">
function createShareButton() {
  const btn = document.createElement("button");
  const sharePOS = document.getElementById("sharePOS");
  const title = document.title;
  const url = 'https://'+siteURL;

  btn.innerText = "share" in navigator ? "공유" : "공유";

  btn.onclick = () => {
    if (navigator.share !== undefined) {
      navigator
        .share({
          title,
          text,
          url
        })
        .then(() => console.log("Shared!"))
        .catch(err => console.error(err));
    } else {
      window.location = `mailto:?subject=${title}&body=${text}%0A${url}`;
    }
  };

  return btn;
}

document.title = "재밌는커뮤니케이션 명함";
sharePOS.appendChild(createShareButton());
	  
	  
	  
    const userAgent = navigator.userAgent;
    const visitedAt = (new Date()).getTime(); // 방문 시간
    const varUA = navigator.userAgent.toLowerCase(); //userAgent 값 얻기 
    //ANDROID
    if (varUA.match('android') != null) {  	   
        if(userAgent.match(/KAKAOTALK/)){
	     location.href='intent://'+siteURL+'#Intent;scheme=http;package=com.android.chrome;end'; 
        };
    } else if (varUA.indexOf("iphone") > -1 || varUA.indexOf("ipod") > -1) {
       if(userAgent.match(/KAKAOTALK/)){
	       XenoUrlOpenLinkDo("https://"+siteURL);
	        //    location.href="https://"+siteURL;
	       // window.open("https://gscom052.github.io/BIZCard-KimInJae2/", "_blank"); //안됨
	       //location.href='ftp://3.35.86.137/pub/bridge.html' //익명 ftp가 필요한데...그렇게 하긴 번거롭다.
      };
   };
	  
    // Initialize deferredPrompt for use later to show browser install prompt.
    let deferredPrompt;

    const divInstall = document.getElementById('installContainer');
    const butInstall = document.getElementById('butInstall');

	</script>
	  <script src="js/main.js"></script>
	<script>

		// beforeinstallprompt not supported in ios
if (varUA.indexOf("iphone") > -1 || varUA.indexOf("ipod") > -1) {
	
}else{
	
/* Put code here */
window.addEventListener('beforeinstallprompt', (event) => {
 // console.log('👍', 'beforeinstallprompt', event);
  // Stash the event so it can be triggered later.
  window.deferredPrompt = event;
  // Remove the 'hidden' class from the install button container
  divInstall.classList.toggle('hidden', false);
});
	
}

butInstall.addEventListener('click', async () => {
 // console.log('👍', 'butInstall-clicked');
  const promptEvent = window.deferredPrompt;
  if (!promptEvent) {
    // The deferred prompt isn't available.
    return;
  }
  // Show the install prompt.
  promptEvent.prompt();
  // Log the result
  const result = await promptEvent.userChoice;
 // console.log('👍', 'userChoice', result);
  // Reset the deferred prompt variable, since
  // prompt() can only be called once.
  window.deferredPrompt = null;
  // Hide the install button.
  divInstall.classList.toggle('hidden', true);
  count=0;
});

window.addEventListener('appinstalled', (event) => {
//  console.log('👍', 'appinstalled', event);
  // Clear the deferredPrompt so it can be garbage collected
  window.deferredPrompt = null;
});

		//IPHONE
		// Detects if device is on iOS 
const isIos = () => {
  const userAgent = window.navigator.userAgent.toLowerCase();
  return /iphone|ipad|ipod/.test( userAgent );
}
// Detects if device is in standalone mode
const isInStandaloneMode = () => ('standalone' in window.navigator) && (window.navigator.standalone);

// Checks if should display install popup notification:
if (isIos() && !isInStandaloneMode()) {
  this.setState({ showInstallMessage: true });
}
		//IPHONE
  </script>
</html>
